<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="main.css" rel="stylesheet">
    <script src="//developers.kakao.com/sdk/js/kakao.min.js"></script>
</head>
<body class="grey-bg">
  
  <div class="white-bg">
    
    <div class="list-box" id=""></div>
      <div class="image-container"></div>">
        <img src="">
        <h4>
      </div>
    </div>
    
  </div> 
  <img src="ko/add-friend.png" onclick="myFunction()" style="width: 100px; height: auto; cursor: pointer;">
  <a class="nav-link" href="/logout">Log Out</a>
  <a class="nav-link" href="#" id="uploadButton">upload</a>
  
  <input type="hidden" id="hiddenValue" value="">

  <script src="/apikey.js" content></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    var selectedIds = [];

    $('.list-box').click(function() {
      $(this).toggleClass('selected');
        
      selectedIds = $('.selected').map(function() {
          return this.id;
      }).get();
      
      console.log(selectedIds);
    });

    document.getElementById('uploadButton').addEventListener('click', function() {
    // 페이지 이동
      url = '/upload?sendEEHOId=';
      for(let i=0; i<selectedIds.length; i++) {
        if(i!=0) url = url + '!!!';
        url = url + selectedIds[i];
      }
      window.location.href = url;
    });

    Kakao.init(apiKey);
    function myFunction() {
      var hiddenInputValue = document.getElementById("hiddenValue").value;

      // 클릭되었을 때 실행할 함수 내용을 여기에 작성
      Kakao.Share.sendCustom({
        templateId: 100618,
        templateArgs: {
          title: "지금 초대코드를 통해 에호에 참여해보세요",
          desc: "templateArgs에서 설정한 값을 템플릿에 ${title} 형태로 입력합니다.",
          url: "family/new/" + hiddenInputValue,
          THU: "https://developers.kakao.com/static/images/pc/txt_visual1.png",
          copyBtn: "copy/invite/code?hiddencode="+hiddenInputValue

        },
      });

        // 또는 원하는 다른 동작을 수행할 수 있습니다.
    }
        
  </script>
  </body>
  
</html>