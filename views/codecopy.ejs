<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clipboard Example</title>
</head>
<body>

<!-- Hidden input element -->
<input type="hidden" id="hiddenInput">
<button onclick="copyToClipboard()">Copy to Clipboard</button>

<script>
document.addEventListener("DOMContentLoaded", function() {
  // 페이지 로딩이 완료되면 실행될 코드
  var hiddenInput = document.getElementById("hiddenInput");

  // URL에서 hiddencode 값을 가져와 hidden input에 설정
  var hiddenValueFromUrl = getQueryParam("hiddencode");
  if (hiddenValueFromUrl) {
    hiddenInput.value = hiddenValueFromUrl;
  } else {
    console.error("hiddencode 값이 없습니다.");
  }

  // 페이지가 종료될 때 실행될 코드
  window.addEventListener("beforeunload", function(event) {
    console.log("페이지가 종료됨");
    // 추가 작업을 수행할 수 있음
  });
});

// 클립보드에 텍스트를 복사하는 함수
function copyToClipboard() {
  var hiddenInput = document.getElementById("hiddenInput");
  var textToCopy = hiddenInput.value;

  var textArea = document.createElement("textarea");
  textArea.value = textToCopy;

  document.body.appendChild(textArea);
  textArea.select();

  try {
    document.execCommand("copy");
    console.log("클립보드에 복사되었습니다.");
  } catch (err) {
    console.error("클립보드 복사 중 오류 발생:", err);
  }

  document.body.removeChild(textArea);
}

// getQueryParam 함수를 이벤트 핸들러 외부에 정의
function getQueryParam(name) {
  var urlParams = new URLSearchParams(window.location.search);
  return urlParams.get(name);
}
</script>

</body>
</html>
